<select id="type-of-page">
    <option disabled="disabled" selected="selected" value=""> - - Type of Page - - </option>
    <option value="video">Video Page</option>
    <option value="timeline">Timeline Page</option>
</select>
<br /><br />
<textarea id="html" placeholder="Place HTML Here..."></textarea>
<br /><br />
<button class="btn" id="parse">Parse HTML</button>
<div id="input-area"></div>
<div style="display: none" id="html-content"></div>
<div style="display: none" id="timeline-html">
    <section class="horizontal-timeline">
        <div class="timeline">
            <div class="events-wrapper">
                <div class="events">
                </div> <!-- .events -->
            </div> <!-- .events-wrapper -->

            <ul class="timeline-navigation">
                <li><a href="#0" class="prev inactive">Prev</a></li>
                <li><a href="#0" class="next">Next</a></li>
            </ul> <!-- .timeline-navigation -->
        </div> <!-- .timeline -->

        <div class="events-content">
            <ol>

                <!--
                <li data-date="01/01/yyyy">
                    <h2>yyyy</h2>

                </li>
                -->
            </ol>
        </div> <!-- .events-content -->
    </section>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
    function ls(location) {
        (location == undefined ? location = document : location = location);
        var divs = location.getElementsByTagName('div');
        for (var i = 0; i < divs.length; i++) {
            console.log('Id: ' + divs[i].getAttribute('id') + ' Class: ' + divs[i].getAttribute('class'));
        }
    }
    $('#parse').on('click', function() {
        if(document.getElementById("type-of-page").value != "" && document.getElementById("html").value != "") {
            var html = document.getElementById("html");
            var htmlContent = document.getElementById("html-content");
            htmlContent.innerHTML = html.value;
            html.value = "";
            switch(document.getElementById('type-of-page').value) {
                case 'video':
                    break;
                case 'timeline':
                    var tempHTML = "";
                    var events = htmlContent.getElementsByClassName('events-content')[0].getElementsByTagName('ol')[0].getElementsByTagName('li');
                    for (var i = 0; i < events.length; i++) {
                        tempHTML += buildEvent(events[i]);
                    }
                    tempHTML += "<br /><button class=\"btn\" id=\"build-timeline\" onclick=\"buildTimelineHTML()\">Build HTML</button>";
                    document.getElementById("input-area").innerHTML = tempHTML;
                    break;
                default:
                    break;
            }
        } else if (document.getElementById("type-of-page").value == "") {
            alert("Select what type of page!");
        } else {
            var html = document.getElementById("html");
            var htmlContent = document.getElementById("html-content");
            htmlContent.innerHTML = html.value;
            html.value = "";
            switch(document.getElementById('type-of-page').value) {
                case 'video':
                    break;
                case 'timeline':
                    var tempHTML = '<div class="event-entry champ-card">' +
                        '<input maxlength="4"><br /><br />' +
                        '<div><textarea></textarea><br />' +
                        '<button class="btn" onclick="newDetail(this)">Add</button>' +
                        '<button class="btn" onclick="removeDetail(this)">Remove</button>' +
                        '<button class="btn" onclick="moveUp(this)">Up</button>' +
                        '<button class="btn" onclick="moveDown(this)">Down</button>' +
                        '<br /><br /></div>' +
                        '<button class="btn" onclick="addEvent(this)">Add Event</button><button class="btn" onclick="deleteEvent(this)">Remove Event</button>' +
                        '<button class="btn" onclick="moveUp(this)">Up</button>' +
                        '<button class="btn" onclick="moveDown(this)">Down</button>' +
                        '</div>' +
                        '<br /><button class=\"btn\" id=\"build-timeline\" onclick=\"buildTimelineHTML()\">Build HTML</button>';
                    document.getElementById("input-area").innerHTML = tempHTML;
                    break;
                default:
                    break;
            }
        }
    });

    function buildEvent(event) {
        var html = '<div class="event-entry champ-card">';
        var year = event.getElementsByTagName('h2')[0].innerHTML;
        html += '<input maxlength="4" value="' + year + '"><br /><br />';
        var points = event.getElementsByTagName('p');
        for(var i = 0; i < points.length; i++) {
            html += '<div><textarea>' + points[i].innerHTML + '</textarea>'
                + '<br /><button class="btn" onclick="newDetail(this)">Add</button>' +
                '<button class="btn" onclick="removeDetail(this)">Remove</button>' +
                '<button class="btn" onclick="moveUp(this)">Up</button>' +
                '<button class="btn" onclick="moveDown(this)">Down</button>' +
                '<br /><br /></div>';
        }
        html += '<button class="btn" onclick="addEvent(this)">Add Event</button><button class="btn" onclick="deleteEvent(this)">Remove Event</button>' +
            '<button class="btn" onclick="moveUp(this)">Up</button>' +
            '<button class="btn" onclick="moveDown(this)">Down</button>' +
            '</div>';
        return html;
    }

    function moveUp(button) {
        var prevElement = $(button.parentElement).prev();
        $(button.parentElement).detach().insertBefore(prevElement);
    }

    function moveDown(button) {
        var nextElement = $(button.parentElement).next();
        $(button.parentElement).detach().insertAfter(nextElement);
    }

    function addEvent(button) {
        $('<div class="event-entry champ-card">' +
            '<input maxlength="4"><br /><br />' +
            '<div><textarea></textarea><br />' +
            '<button class="btn" onclick="newDetail(this)">Add</button>' +
            '<button class="btn" onclick="removeDetail(this)">Remove</button>' +
            '<button class="btn" onclick="moveUp(this)">Up</button>' +
            '<button class="btn" onclick="moveDown(this)">Down</button>' +
            '<br /><br /></div>' +
            '<button class="btn" onclick="addEvent(this)">Add Event</button><button class="btn" onclick="deleteEvent(this)">Remove Event</button>' +
            '<button class="btn" onclick="moveUp(this)">Up</button>' +
            '<button class="btn" onclick="moveDown(this)">Down</button>' +
            '</div>').insertAfter(button.parentElement);
    }

    function deleteEvent(button) {
        $(button.parentElement).remove();
    }

    function newDetail(button) {
        $('<div><textarea></textarea><br />' +
            '<button class="btn" onclick="newDetail(this)">Add</button>' +
            '<button class="btn" onclick="removeDetail(this)">Remove</button>' +
            '<button class="btn" onclick="moveUp(this)">Up</button>' +
            '<button class="btn" onclick="moveDown(this)">Down</button>' +
            '<br /><br /></div>').insertAfter(button.parentElement);
    }

    function removeDetail(button) {
        if(button.parentElement.parentElement.getElementsByTagName('textarea').length >= 2) {
            $(button.parentElement).remove();
        }
    }

    function buildTimelineHTML() {
        var timelineHTML = document.getElementById("timeline-html");
        var events = document.getElementsByClassName('event-entry');
        var tempHTML = "";
        tempHTML += "<ol>";
        for (var i = 0; i < events.length; i++) {
           var currentEvent = events[i].getElementsByTagName('input')[0].value;
            if(i == 0) {
                tempHTML += '<li><a href=\"#0\" data-date=\"01/01/' + currentEvent + '\" class=\"selected\">' + currentEvent + '</a></li>';
            } else {
                tempHTML += '<li><a href=\"#0\" data-date=\"01/01/' + currentEvent + '\">' + currentEvent + '</a></li>';
            }
        }
        tempHTML += '</ol><span class=\"filling-line\" aria-hidden=\"true\"></span>';
        timelineHTML.getElementsByClassName('events')[0].innerHTML = tempHTML;
        tempHTML = "";
        for (var i = 0; i < events.length; i++) {
            var currentEvent = events[i].getElementsByTagName('input')[0].value;
            if (i == 0) {
                tempHTML += '<li class=\"selected\" data-date=\"01/01/' + currentEvent + '\">';
            } else {
                tempHTML += '<li data-date=\"01/01/' + currentEvent + '\">';
            }
            tempHTML += '<h2>' + currentEvent + '</h2>';
            var points = events[i].getElementsByTagName('textarea');
            for (var j = 0; j < points.length; j++) {
                tempHTML += '<p>' + points[j].value + '</p><br />'
            }
            tempHTML += '</li>';
        }
        timelineHTML.getElementsByClassName('events-content')[0].getElementsByTagName('ol')[0].innerHTML = tempHTML;
        $("<br /><br /><textarea id=\"output-html\"></textarea>").insertAfter('#build-timeline');
        document.getElementById("output-html").value = timelineHTML.innerHTML;
    }
</script>